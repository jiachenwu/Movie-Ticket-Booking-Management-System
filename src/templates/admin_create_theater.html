{% extends "index.html" %}

{% block title %} Create Theater {%endblock%}

{% block table %}

<div class="row">
    <div class="col-6">
        <form class="form-signin" method="POST">
            <h1 class="h3 mb-3 font-weight-normal">Create Theater</h1>
            <div class="form-group">
                <label for="Name">Theater Name</label>
                <input type="text" name="theater" class="form-control" placeholder="Name" required autofocus>
            </div>
            <div class="form-group">
                <label for="Name">Company</label>
                <select name="company" class="form-control" id="company">
                    {%for Company in companies %}
                    <option value="{{Company[0]}}">{{Company[0]}}</option>
                    {%endfor%}
                </select>
            </div>
            <label for="Street Address">Street Address</label>
            <input type="text" name="street" class="form-control" placeholder="Street Address" required>
            <label for="City">City</label>
            <input type="text" name="city" class="form-control" placeholder="City" required>
            <div class="form-group">
                <label for="state">State</label>
                <select class="form-control" name="state">
                    <option value="AL">Alabama</option>
                    <option value="AK">Alaska</option>
                    <option value="AZ">Arizona</option>
                    <option value="AR">Arkansas</option>
                    <option value="CA">California</option>
                    <option value="CO">Colorado</option>
                    <option value="CT">Connecticut</option>
                    <option value="DE">Delaware</option>
                    <option value="DC">District Of Columbia</option>
                    <option value="FL">Florida</option>
                    <option value="GA">Georgia</option>
                    <option value="HI">Hawaii</option>
                    <option value="ID">Idaho</option>
                    <option value="IL">Illinois</option>
                    <option value="IN">Indiana</option>
                    <option value="IA">Iowa</option>
                    <option value="KS">Kansas</option>
                    <option value="KY">Kentucky</option>
                    <option value="LA">Louisiana</option>
                    <option value="ME">Maine</option>
                    <option value="MD">Maryland</option>
                    <option value="MA">Massachusetts</option>
                    <option value="MI">Michigan</option>
                    <option value="MN">Minnesota</option>
                    <option value="MS">Mississippi</option>
                    <option value="MO">Missouri</option>
                    <option value="MT">Montana</option>
                    <option value="NE">Nebraska</option>
                    <option value="NV">Nevada</option>
                    <option value="NH">New Hampshire</option>
                    <option value="NJ">New Jersey</option>
                    <option value="NM">New Mexico</option>
                    <option value="NY">New York</option>
                    <option value="NC">North Carolina</option>
                    <option value="ND">North Dakota</option>
                    <option value="OH">Ohio</option>
                    <option value="OK">Oklahoma</option>
                    <option value="OR">Oregon</option>
                    <option value="PA">Pennsylvania</option>
                    <option value="RI">Rhode Island</option>
                    <option value="SC">South Carolina</option>
                    <option value="SD">South Dakota</option>
                    <option value="TN">Tennessee</option>
                    <option value="TX">Texas</option>
                    <option value="UT">Utah</option>
                    <option value="VT">Vermont</option>
                    <option value="VA">Virginia</option>
                    <option value="WA">Washington</option>
                    <option value="WV">West Virginia</option>
                    <option value="WI">Wisconsin</option>
                    <option value="WY">Wyoming</option>
                </select>
            </div>
            <div class="form-group">

                <label for="Zipcode">Zipcode</label>
                <input type="number" name="zipcode" class="form-control" placeholder="Zipcode" required>
            </div>
            <div class="form-group">

                <label for="Capacity">Capacity</label>
                <input type="number" name="capacity" class="form-control" required>
            </div>
            <div class="form-group">
                <label for="Capacity">Manger</label>
                <select name="manager" id="manager" class="form-control">
                </select>
            </div>
            <button class="btn btn-lg btn-primary btn-block" type="submit">Create</button>
            <!-- type here not sure -->
            {% if error %}
            <div class="alert alert-info" role="alert">
                {{error}}
            </div>
            {% endif %}
        </form>
    </div>
</div>

<script>
    const managers = {{managers|safe}};
    $('#company').on('change', function(e){
        const com = $(this).val();
        const mans = managers.filter(x => x[2] === com);
        const manSelect = $('#manager');
        manSelect.empty();
        mans.forEach( m => {
            const option = $("<option></option>");
            option.attr('value', m[1]);
            option.html(m[0]);
            option.appendTo(manSelect);
        })
    })
    $('#company').trigger('change');
</script>

{% endblock %}